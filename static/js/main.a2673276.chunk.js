(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(22)},19:function(e,t,n){e.exports=n.p+"static/media/move.7d5eff42.mp3"},20:function(e,t,n){e.exports=n.p+"static/media/popup.4af4d408.mp3"},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(9),i=n.n(o),l=n(5),c=n(7),u=n(1),s={fillStyle:"rgba(0, 0, 0, 0)",strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:0,textAlign:"start",textBaseline:"top",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:16,fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"'};function f(e,t){t.font=t.font||"".concat(t.fontStyle||s.fontStyle," ").concat(t.fontVariant||s.fontVariant," ").concat(t.fontWeight||s.fontWeight," ").concat(t.fontSize||s.fontSize,"px ").concat(t.fontFamily||s.fontFamily),Object.keys(t).forEach(function(n){n in e&&t[n]&&(e[n]=t[n])})}function v(e){return"string"===typeof e||"number"===typeof e}function h(e,t,n){a.a.Children.forEach(t,function(t){if(c=t,a.a.isValidElement(c)&&c.type.callName){var r=Object(u.a)({},n,t.props);if(r.x=n.x+(t.props.x||0),r.y=n.y+(t.props.y||0),function(e){return"Layout"===e.type.callName}(t))if(t.props.column){var o=0;a.a.Children.forEach(t.props.children,function(t){r.x+=o,o=(t.props.x||0)+(t.props.w||0),h(e,t,r)})}else{var i=0;a.a.Children.forEach(t.props.children,function(t){r.y+=i,i=(t.props.y||0)+(t.props.h||0),h(e,t,r)})}else!function(e){return"Text"===e.type.callName}(t)?(m[t.type.callName].call(e,r),h(e,t.props.children,r)):h(e,v(t.props.text)?t.props.text:t.props.children,r)}else if(v(t)){var l=Object(u.a)({},n,{text:t});"center"===n.textAlign&&(l.x=(n.x||0)+(n.w||0)/2),"middle"===n.textBaseline&&(l.y=(n.y||0)+(n.h||0)/2),n.fontFillStyle&&(l.fillStyle=n.fontFillStyle),n.fontStrokeStyle&&(l.strokeStyle=n.fontStrokeStyle),m.Text.call(e,l)}var c})}function m(e){var t=e.children,n=e.canvasStyles,o=Object(c.a)(e,["children","canvasStyles"]),i=Object(r.useRef)(null),l=Object(r.useMemo)(function(){return function(){return i.current&&i.current.getContext("2d")}},[]);return Object(r.useEffect)(function(){var e=l();e&&f(e,Object(u.a)({},s,n))},[n,l]),Object(r.useEffect)(function(){var e=l();if(e){var n=e.canvas.width,r=e.canvas.height;e.clearRect(0,0,n,r),h(e,t,{x:0,y:0,w:n,h:r})}}),a.a.createElement("canvas",Object.assign({ref:i},o))}function d(e){return null}function b(e){e.children;var t=e.x,n=void 0===t?0:t,r=e.y,a=void 0===r?0:r,o=e.w,i=void 0===o?0:o,l=e.h,u=void 0===l?0:l,s=e.r,v=Object(c.a)(e,["children","x","y","w","h","r"]),h=this;return h.save(),f(h,v),h.beginPath(),s?(h.moveTo(n+s,a),h.arcTo(n+i,a,n+i,a+u,s),h.arcTo(n+i,a+u,n,a+u,s),h.arcTo(n,a+u,n,a,s),h.arcTo(n,a,n+i,a,s)):h.rect(n,a,i,u),h.closePath(),h.fill(),v.lineWidth&&h.stroke(),h.restore(),null}function y(e){var t=e.children,n=e.text,r=e.x,a=void 0===r?0:r,o=e.y,i=void 0===o?0:o,l=e.maxWidth,u=Object(c.a)(e,["children","text","x","y","maxWidth"]),s=v(n)?n.toString():v(t)?t.toString():"";return this.save(),f(this,u),this.fillText(s,a,i,l),u.lineWidth&&this.strokeText(s,a,i,l),this.restore(),null}d.callName="Layout",m.Layout=d,b.callName="Rect",m.Rect=b,y.callName="Text",m.Text=y;var p=m,g="ADD_TILE",x="LEFT",E="DOWN",w="RIGHT",S="UP",O="SET_BOARD_LENGTH",j="INITI",k="UNDO";var T=n(6),N=n(3),R=n(4),z=n(10),M=n(2),L=n(11),W=n(12),C=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(N.a)(this,t),n=Object(z.a)(this,Object(M.a)(t).call(this,e)),r.forEach(function(e){n.value[e.y][e.x]=e}),n}return Object(W.a)(t,e),Object(R.a)(t,[{key:"addTile",value:function(){var e=this.emptyPositions,t=e.length;if(!t)return!1;var n=e[Math.random()*t|0],r=n.x,a=n.y;return this.value[a][r]={y:a,x:r,value:Math.random()>.1?2:4},!0}},{key:"isEqual",value:function(e){return Object(L.a)(Object(M.a)(t.prototype),"isEqual",this).call(this,e,function(e,t){return null!==e&&null!==t?e.value!==t.value:e!==t})}},{key:"moveToFront",value:function(e){var t=this;this.value.forEach(function(n,r){t.value[r]=t.moveRowToFront(n,e)})}},{key:"moveToBack",value:function(e){var t=this;this.value.forEach(function(n,r){t.value[r]=t.moveRowToBack(n,e)})}},{key:"moveRowToFront",value:function(e,t){var n=[],r=0,a=e.length-1,o=NaN;return e.forEach(function(e){null!==e?o===e.value?(t(2*e.value),n[r-1]=Object(u.a)({},e,{value:2*e.value}),n[a--]=null,o=NaN):(n[r++]=Object(u.a)({},e),o=e.value):n[a--]=null}),n}},{key:"moveRowToBack",value:function(e,t){return this.moveRowToFront(Object(T.a)(e).reverse(),t).reverse()}},{key:"tiles",get:function(){var e=[];return this.value.forEach(function(t,n){return t.forEach(function(t,r){null!==t&&(e[e.length]=Object(u.a)({},t,{y:n,x:r}))})}),e}}]),t}(function(){function e(t){Object(N.a)(this,e),this.value=void 0,this.size=void 0;var n="number"===typeof t,r=n?t:t.length;this.size=r,this.value=[];for(var a=0;a<r;a++){for(var o=[],i=0;i<r;i++)o[i]=n?null:t[a][i];this.value[a]=o}}return Object(R.a)(e,[{key:"transposeMatrix",value:function(){var t=this,n=new e(this.value);this.value.forEach(function(e,r){return e.forEach(function(e,a){t.value[a][r]=n.value[r][a]})})}},{key:"isEqual",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e!==t},n=e.size;if(this.size!==n)return!1;for(var r=0;r<n;r++)for(var a=0;a<n;a++)if(t(this.value[r][a],e.value[r][a]))return!1;return!0}},{key:"emptyPositions",get:function(){var e=[];return this.value.forEach(function(t,n){return t.forEach(function(t,r){null===t&&(e[e.length]={y:n,x:r})})}),e}}]),e}()),B={handleKey:function(e,t){for(var n,r,a=e[arguments.length>2&&void 0!==arguments[2]?arguments[2]:"keyCode"],o=0,i=t.length;o<i;o++){var c=Object(l.a)(t[o],2);if(n=c[0],r=c[1],n.includes(a))return r(e),void e.preventDefault()}},save:function(e,t){return!!window.localStorage&&(window.localStorage.setItem(e,JSON.stringify(t)),!0)},load:function(e){return!!window.localStorage&&JSON.parse(window.localStorage.getItem(e))}},F="GAME2048",A=10;function I(e,t,n){return(e-(t+1)*n)/t}function D(e){var t=function(e){var t=new C(e.size,e.tiles),n=0;return t.moveToFront(function(e){return n+=e}),{isRemovable:!e.isEqual(t),score:n,tileMatrix:t}}(e),n=function(e){var t=new C(e.size,e.tiles),n=0;return t.transposeMatrix(),t.moveToBack(function(e){return n+=e}),t.transposeMatrix(),{isRemovable:!e.isEqual(t),score:n,tileMatrix:t}}(e),r=function(e){var t=new C(e.size,e.tiles),n=0;return t.moveToBack(function(e){return n+=e}),{isRemovable:!e.isEqual(t),score:n,tileMatrix:t}}(e),a=function(e){var t=new C(e.size,e.tiles),n=0;return t.transposeMatrix(),t.moveToFront(function(e){return n+=e}),t.transposeMatrix(),{isRemovable:!e.isEqual(t),score:n,tileMatrix:t}}(e),o=function(e,t,n,r,a){return!(e.value.some(function(e){return e.some(function(e){return null===e})})||t.isRemovable||n.isRemovable||r.isRemovable||a.isRemovable)}(e,t,n,r,a);return{tiles:e.tiles,left:t,down:n,right:r,up:a,gameover:o}}function U(e,t){return Object(u.a)({},e,function(e,t){var n=e.score+t.score,r=n<e.best?e.best:n;return{tileMatrix:t.tileMatrix,tiles:t.tileMatrix.tiles,score:n,best:r}}(e,t),{lock:!0})}function q(e){var t=e.size,n=e.gup,r=e.boardLength,a=e.score,o=e.best,i=e.tiles,l=e.history,c=new C(t,i);if(0===i.length){for(var s=2;s-- >0&&c.addTile(););l[l.length]={score:a,best:o,tiles:c.tiles},l.length>A&&l.shift(),B.save(F,l)}var f=D(c);return Object(u.a)({size:t,gup:n,boardLength:r,score:a,best:o,cellLength:I(r,t,n),tileMatrix:c,lock:!1,history:l},f)}function G(e,t){switch(t.type){case g:for(var n=t.addCount;n-- >0&&e.tileMatrix.addTile(););var r=Object(u.a)({},e,D(e.tileMatrix),{lock:!1});return r.history[r.history.length]={score:r.score,best:r.best,tiles:Object(T.a)(r.tiles)},r.history.length>A&&r.history.shift(),B.save(F,e.history),r;case x:return U(e,e.left);case E:return U(e,e.down);case w:return U(e,e.right);case S:return U(e,e.up);case O:var a=t.boardLength;return Object(u.a)({},e,{boardLength:a,cellLength:I(a,e.size,e.gup)});case j:return q(t.initialState);case k:e.history.pop(),B.save(F,e.history);var o=e.history[e.history.length-1];return q(Object(u.a)({},e,o));default:return e}}function P(e){var t=function(e){var t=Object(r.useRef)(e);return Object(r.useEffect)(function(){t.current=e},[e]),t}(e);return Object(r.useCallback)(function(){return t.current&&t.current.apply(t,arguments)},[t])}var H=n(19),J=n(20),V=new Audio(H),_=new Audio(J),K={2:"#fff9c4",4:"#ffe082",8:"#ffb74d",16:"#ffab91",32:"#ef9a9a",64:"#f06292",128:"#ab47bc",256:"#9575cd",512:"#0091ea",1024:"#00b8d4",2048:"#00bfa5",4096:"#00c853",8192:"#aeea00",cell:"#d7ccc8",board:"#bcaaa4",title:"#0091ea",score:"#ec407a",scoreNumber:"#f1f8e9",scoreText:"#efebe9",best:"#ff5722",bestNumber:"#f1f8e9",bestText:"#efebe9",gameover:"#efebe9aa",gameoverText:"#795548",black:"#212121"},$={1:[34,42],2:[30,36],3:[26,34],4:[22,32]},Q=640,X=320,Y=64,Z={LEFT:37,UP:38,RIGHT:39,DOWN:40,A:65,S:83,D:68,W:87};function ee(e,t){return(t>Q?Q:t<X?X:t)-2*e}function te(){var e=Object(r.useReducer)(G,function(){var e=B.load(F)||[],t=0,n=0,r=[];if(e.length){var a=e[e.length-1];r=a.tiles,t=a.score,n=a.best}return{size:4,gup:8,boardLength:ee(8,window.innerWidth),score:t,best:n,tiles:r,history:e}}(),q),t=Object(l.a)(e,2),n=t[0],o=t[1],i=n.size,c=n.gup,u=n.boardLength,s=n.cellLength,f=n.score,v=n.best,h=n.tiles,m=n.left,T=n.down,N=n.right,R=n.up,z=n.gameover,M=n.lock,L=n.history,W=Object(r.useRef)(),C=u>(Q+X)/2-c,A=Object(r.useMemo)(function(){return{width:u}},[u]),I=Object(r.useMemo)(function(){return function(e,t,n,r,o,i){var l=e/2.5,c=i?16:12,u=2*c;return a.a.createElement(d,{column:!0,h:e+2*t},a.a.createElement(y,{text:"2048",w:n/2,h:e+2*t,fontSize:e/4*3,fillStyle:K.title,fontWeight:"bold",textAlign:"center",textBaseline:"middle"}),a.a.createElement(b,{x:t,y:t,w:n/4-t,h:e,r:t/2,fillStyle:K.score,fontWeight:"bold",textAlign:"center",textBaseline:"middle"},a.a.createElement(y,{text:"SCORE",h:l,fontSize:c,fillStyle:K.scoreText}),a.a.createElement(y,{text:r,y:l,h:e-l,fontSize:u,fillStyle:K.scoreNumber})),a.a.createElement(b,{x:t,y:t,w:n/4-t,h:e,r:t/2,fillStyle:K.best,fontWeight:"bold",textAlign:"center",textBaseline:"middle"},a.a.createElement(y,{text:"BEST",h:l,fontSize:c,fillStyle:K.bestText}),a.a.createElement(y,{text:o,y:l,h:e-l,fontSize:u,fillStyle:K.bestNumber})))}(Y,c,u,f,v,C)},[f,v,u,c,C]),D=Object(r.useMemo)(function(){return function(e,t,n){for(var r=[],o=0;o<e;o++)for(var i=0;i<e;i++)r[r.length]=a.a.createElement(b,{key:o+"/"+i,x:i*(n+t)+t,y:o*(n+t)+t,w:n,h:n,r:t/2,fillStyle:K.cell});return r}(i,c,s)},[s,c,i]),U=Object(r.useMemo)(function(){return function(e,t,n,r){var o=r?1:0;return e.map(function(e,r){var i=e.x,l=e.y,c=e.value;return a.a.createElement(b,{key:"tile"+r,x:i*(n+t)+t,y:l*(n+t)+t,w:n,h:n,r:t/2,fillStyle:K[c],fontFillStyle:K.black,fontSize:$[c.toString().length][o],fontWeight:"bold",textAlign:"center",textBaseline:"middle"},c)})}(h,c,s,C)},[h,s,c,C]),H=Object(r.useCallback)(function(e){o(e),V.play()},[]),J=Object(r.useCallback)(function(){window.clearTimeout(W.current),W.current=window.setTimeout(function(){o(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{type:g,addCount:e}}()),_.play()},255)},[]),te=P(function(){!M&&m.isRemovable&&(H({type:x}),J())}),ne=P(function(){!M&&T.isRemovable&&(H({type:E}),J())}),re=P(function(){!M&&N.isRemovable&&(H({type:w}),J())}),ae=P(function(){!M&&R.isRemovable&&(H({type:S}),J())}),oe=P(function(){!M&&L.length>1&&o({type:k})}),ie=P(function(){o({type:j,initialState:{size:i,gup:c,boardLength:u,best:v,score:0,tiles:[],history:L}})});return Object(r.useEffect)(function(){var e=function(e){B.handleKey(e,[[[Z.LEFT,Z.A],te],[[Z.DOWN,Z.S],ne],[[Z.RIGHT,Z.D],re],[[Z.UP,Z.W],ae]])};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[]),Object(r.useEffect)(function(){var e=function(){return o((e=ee(c,window.innerWidth),{type:O,boardLength:e}));var e};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[c]),Object(r.useEffect)(function(){return function(){return window.clearTimeout(W.current)}},[]),a.a.createElement("div",{className:"center",style:A},a.a.createElement(p,{width:u,height:u+Y+3*c},a.a.createElement(d,null,I,a.a.createElement(b,{x:0,y:0,w:u,h:u,r:c/2,fillStyle:K.board},D,U,z&&a.a.createElement(b,{key:"gameover",x:0,y:0,w:u,h:u,r:c/2,fillStyle:K.gameover,fontFillStyle:K.gameoverText,fontSize:u/8,fontWeight:"bold",textAlign:"center",textBaseline:"middle"},"Game over!")))),a.a.createElement("div",{className:"control"},a.a.createElement("div",{className:"btn-group"},a.a.createElement("button",{className:"btn",onClick:ie},"New Game"),a.a.createElement("button",{className:"btn",onClick:oe,disabled:M||L.length<=1},"Undo")),a.a.createElement("div",{className:"arraw-group"},a.a.createElement("div",null,a.a.createElement("button",{className:"btn",disabled:M||!R.isRemovable,onClick:ae},a.a.createElement("span",{className:"iconfont"},"\ue7ed"))),a.a.createElement("div",null,a.a.createElement("button",{className:"btn",disabled:M||!m.isRemovable,onClick:te},a.a.createElement("span",{className:"iconfont"},"\ue7ec")),a.a.createElement("button",{className:"btn",disabled:M||!T.isRemovable,onClick:ne},a.a.createElement("span",{className:"iconfont"},"\ue7ee")),a.a.createElement("button",{className:"btn",disabled:M||!N.isRemovable,onClick:re},a.a.createElement("span",{className:"iconfont"},"\ue7eb"))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(21);i.a.render(a.a.createElement(function(){return a.a.createElement(te,null)},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.a2673276.chunk.js.map